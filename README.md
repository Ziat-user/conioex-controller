# conioex-controller

`conioex` ライブラリを使用して、ゲームコントローラー（ジョイスティック）の入力状態をコンソール画面上でリアルタイムに可視化するC++プログラムです。

アナログスティックの傾き、角度、デジタルボタンの押下状態を確認することができます。

## 機能

*   **アナログスティック情報の表示**
    *   左スティック・右スティックの生データ (X, Y座標) 表示
    *   スティックの傾き角度 (度数法) の計算と表示
    *   コンソール上のASCIIアートによるスティック位置のグラフィカル表示
*   **ボタン入力の表示**
    *   A, B, X, Y ボタン
    *   L/R バンパー (LB, RB)
    *   L/R トリガー (LT, RT) ※デジタル入力として判定
    *   スティック押し込み (LS, RS)
    *   BACK, START, GUIDE ボタン
*   **その他の入力**
    *   POV (視点制御/ハットスイッチ) の値表示

## 動作環境

*   Windows OS
*   Visual Studio 2022 (または互換性のあるC++開発環境)
*   **conioex ライブラリ** (conioex.h, conioex.lib)
    *   本プログラムのコンパイルと実行には `conioex` が必要です。

## セットアップとビルド

1.  このリポジトリをクローンします。
2.  Visual Studio でソリューション (`.sln`) またはプロジェクトを開きます。
3.  プロジェクトの設定で、`conioex.h` へのインクルードパスと `conioex.lib` へのライブラリパスが正しく通っていることを確認してください。
    *   ソースコードと同じディレクトリに `conioex.h` がある場合はそのままで認識される可能性があります。
4.  ビルド (Ctrl+Shift+B) を実行します。

## 使い方

1.  PCにUSBコントローラー（Xboxコントローラー等）を接続してください。
2.  生成された実行ファイル (`.exe`) を起動します。
3.  コントローラーを操作すると、画面上の数値やインジケーターが変化します。
4.  プログラムを終了するには、ウィンドウを閉じてください (またコード上では無限ループになっているため、強制終了等で抜けてください)。(ALT+F4)

## コードの概要

*   **`main.cpp`**: メインロジックが含まれています。
    *   `draw_stick_visual`: スティックの座標 (`0`〜`65535`) を受け取り、11x11 のグリッド内に `O` で位置を描画します。
    *   `print_pressed_buttons`: ボタン入力のビットマスクを解析し、押されているボタン名をリスト表示します。
    *   `main`: `inport` 関数を使用してコントローラーの各ポート (PJ_XPOS, PJ_BTNS など) から値を読み取り、画面を更新するループ処理です。

## 補足

*   スティックのニュートラルポジションは、コード内で `32767` (X軸)、`32511` (Y軸) 付近として計算されています。自身が使用するコントローラーに合わせて使用してください
*   `conioex` の仕様により、画面クリア (`clrscr`) とカーソル移動 (`gotoxy`) を高速に行うことでアニメーション表示を実現しています。
